# ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### 1. –°–æ–∑–¥–∞–Ω–∏–µ Telegram Bot

1. **–ù–∞–π–¥–∏—Ç–µ @BotFather –≤ Telegram**
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É:** `/newbot`
3. **–í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞:** `Argentina Media Bot`
4. **–í–≤–µ–¥–∏—Ç–µ username:** `argentina_media_bot` (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `bot`)
5. **–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω:** `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–Ω–∞–ª–∞ –∏–ª–∏ —á–∞—Ç–∞

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –∫–∞–Ω–∞–ª
1. **–°–æ–∑–¥–∞–π—Ç–µ –∫–∞–Ω–∞–ª** –≤ Telegram
2. **–î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞** –∫–∞–Ω–∞–ª–∞
3. **–ü–æ–ª—É—á–∏—Ç–µ ID –∫–∞–Ω–∞–ª–∞:**
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª
   - –ü–µ—Ä–µ—à–ª–∏—Ç–µ –µ–≥–æ –±–æ—Ç—É @userinfobot
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID (–Ω–∞–ø—Ä–∏–º–µ—Ä: `@argentina_news` –∏–ª–∏ `-1001234567890`)

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –ª–∏—á–Ω—ã–π —á–∞—Ç
1. **–ù–∞—á–Ω–∏—Ç–µ —á–∞—Ç —Å –±–æ—Ç–æ–º**
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**
3. **–ü–æ–ª—É—á–∏—Ç–µ ID —á–∞—Ç–∞:**
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É @userinfobot
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à ID (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456789`)

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env`:

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHANNEL_ID=@argentina_news
# –ò–õ–ò –¥–ª—è –ª–∏—á–Ω–æ–≥–æ —á–∞—Ç–∞:
# TELEGRAM_CHAT_ID=123456789
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –≤ Supabase Dashboard:

```sql
-- –ü–æ–ª–µ –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Telegram
ALTER TABLE articles ADD COLUMN IF NOT EXISTS telegram_published_at TIMESTAMP WITH TIME ZONE;

-- –ò–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤
CREATE INDEX IF NOT EXISTS idx_articles_telegram_published ON articles(telegram_published_at) WHERE telegram_published_at IS NULL;

-- –ò–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –≥–æ—Ç–æ–≤—ã—Ö –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–≤
CREATE INDEX IF NOT EXISTS idx_articles_ready_to_publish ON articles(openai_should_post, telegram_published_at) WHERE openai_should_post = true AND telegram_published_at IS NULL;

-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ–ª—è–º
COMMENT ON COLUMN articles.telegram_published_at IS '–í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Å—Ç–∞ –≤ Telegram';
```

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
node cli.js --test_telegram
```

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

- `--test_telegram` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram
- `--publish_posts [N]` - –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å N –≥–æ—Ç–æ–≤—ã—Ö –ø–æ—Å—Ç–æ–≤
- `--send_stats` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

## üìä –ß—Ç–æ –±—É–¥–µ—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å—Å—è:

- **–ó–∞–≥–æ–ª–æ–≤–æ–∫:** –°–∞—Ä–∫–∞—Å—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç OpenAI
- **–ö–æ–Ω—Ç–µ–Ω—Ç:** –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–æ 1000 —Å–∏–º–≤–æ–ª–æ–≤
- **–°—Å—ã–ª–∫–∞:** –ù–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç—å—é
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** –ù–∞–∑–≤–∞–Ω–∏–µ –∏–∑–¥–∞–Ω–∏—è

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

1. **–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –∫–∞–Ω–∞–ª–∞** (–µ—Å–ª–∏ –ø—É–±–ª–∏–∫—É–µ—Ç–µ –≤ –∫–∞–Ω–∞–ª)
2. **–¢–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–º** - –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ –µ–≥–æ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –¥–æ—Å—Ç—É–ø–µ
3. **–ö–∞–Ω–∞–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É–±–ª–∏—á–Ω—ã–º** –∏–ª–∏ –±–æ—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—é
4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Telegram:** –º–∞–∫—Å–∏–º—É–º 4096 —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ

## üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è:

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ (–æ—Ü–µ–Ω–∫–∞ 6+) –≤ Telegram –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç. 